{% extends 'base_admin.html' %}

{% block content %}
<h1>Editar Reserva - ID: {{ reserva.id }}</h1>

<!-- Exibir mensagem de erro se houver algum problema -->
{% if error %}
    <div class="alert alert-danger">
        {{ error }}
    </div>
{% endif %}

<!-- Exibir mensagem de sucesso após a edição -->
{% if success %}
    <div class="alert alert-success">
        {{ success }}
    </div>
{% endif %}

<form method="POST">
    {% csrf_token %}
    
    <div>
      <label for="data_inicio">Data Início</label>
      <input type="date" id="data_inicio" name="data_inicio" value="{{ reserva.1|date:'Y-m-d' }}">
    </div>
  
    <div>
      <label for="data_fim">Data Fim</label>
      <input type="date" id="data_fim" name="data_fim" value="{{ reserva.2|date:'Y-m-d' }}">
    </div>
  
    <div>
      <label for="danos">Danos</label>
      <input type="checkbox" id="danos" name="danos" {% if reserva.3 %}checked{% endif %}>
    </div>
  
    <div>
      <label for="danostexto">Descrição dos Danos</label>
      <textarea id="danostexto" name="danostexto">{{ reserva.4 }}</textarea>
    </div>
  
    <div>
      <label for="kmpercorridos">KM Percorridos</label>
      <input type="number" id="kmpercorridos" name="kmpercorridos" value="{{ reserva.5 }}">
    </div>
  
    <div>
      <label for="viatura">Viatura</label>
      <select id="viatura" name="viatura">
        {% for viatura in viaturas %}
          <option value="{{ viatura.0 }}" {% if viatura.0 == reserva.6 %}selected{% endif %}>{{ viatura.1 }}</option>
        {% endfor %}
      </select>
    </div>
  
    <div>
      <label for="utilizador">Utilizador</label>
      <select id="utilizador" name="utilizador">
        <option value="{{ reserva.7 }}" selected>{{ reserva.8 }}</option>
      </select>
    </div>
  
    <div>
      <label for="estadoreserva">Estado da Reserva</label>
      <select id="estadoreserva" name="estadoreserva">
        {% for estado in estados_reserva %}
          <option value="{{ estado.0 }}" {% if estado.0 == reserva.8 %}selected{% endif %}>{{ estado.1 }}</option>
        {% endfor %}
      </select>
    </div>
  
    <button type="submit">Guardar</button>
  </form>

<a href="{% url 'admin_reservas' %}" class="btn btn-secondary mt-3">Voltar</a>
{% endblock %}
