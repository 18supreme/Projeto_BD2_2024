{% extends 'clientes_home.html' %}

{% block title %}Viaturas{% endblock %}

{% block content %}
    {% if viatura %}
    <div> <!--- Margin -->

    <div style="display: flex; flex-direction: row; flex-wrap: wrap; column-gap: 50px;"> <!--- flex -->
        <div style="flex-basis: 55%; height: 500px; width: 100%; background-color: gray;"> <!--- Imagem -->
        <img style="width: 100%; height: 100%;" src="https://media.volantesic.pt/Z560x420/S56/C2/V0/Tphoto/ID0525829.jpg"/>      
        </div>
        <div style="flex-basis: 40%;"> <!--- Detalhes -->
            <div style="display: flex; flex-direction: row; row-gap: 25px; flex-wrap: wrap; justify-content: flex-start;">
                <div style="display: flex; flex-direction: column; row-gap: 0px; flex-basis: 50%;">
                    <text style="font-weight: bolder; font-size: 30px;"> Detalhes </text>
                </div>
                <div style="display: flex; flex-direction: column; row-gap: 0px; flex-basis: 50%;">
                    <div style="width: 100%; text-align: right; margin: 0px 0px 10px 0px;">
                        {% if viatura.8 == 'Disponível' %}  <button style="width: 10vw; min-width: 150px; max-width: 200px; height: 5vh; min-height: 50px; max-height: 75px; border-radius: 10px; font-size: 15px; color: white; font-weight: bolder; background-color: green;" onclick="openModal()"> Reservar </button>
                            {% else %}<button style="width: 10vw; min-width: 150px; max-width: 200px; height: 5vh; min-height: 50px; max-height: 75px; border-radius: 10px; font-size: 15px; color: white; font-weight: bolder; background-color: red;"> Indisponivel </button>
                            {% endif %}
                    </div>
                </div>
            </div>
            <div style="display: flex; flex-direction: row; row-gap: 25px; flex-wrap: wrap; margin-top: 25px; justify-content: flex-start;">
                <div style="display: flex; flex-direction: column; row-gap: 0px; flex-basis: 50%;">
                    <text style="font-weight: bolder;">Marca </text>
                    <text> {{ viatura.5 }}</text>
                </div>
                <div style="display: flex; flex-direction: column; row-gap: 0px; flex-basis: 50%;">
                    <text style="font-weight: bolder;">Modelo </text>
                    <text> {{ viatura.4 }} </text>
                </div>
                <div style="display: flex; flex-direction: column; row-gap: 0px; flex-basis: 50%;">
                    <text style="font-weight: bolder;">Tipo viatura </text>
                    <text> {{ viatura.6 }} </text>
                </div>
                <div style="display: flex; flex-direction: column; row-gap: 0px; flex-basis: 50%;">
                    <text style="font-weight: bolder;">Cor </text>
                    <text> {{ viatura.7 }} </text>
                </div>
                <div style="display: flex; flex-direction: column; row-gap: 0px; flex-basis: 50%;">
                    <text style="font-weight: bolder;">Km </text>
                    <text> {{ viatura.2 }}</text>
                </div>
                <div style="display: flex; flex-direction: column; row-gap: 0px; flex-basis: 50%;">
                    <text style="font-weight: bolder;">Ano </text>
                    <text> {{ viatura.3 }}</text>
                </div>
                <div style="display: flex; flex-direction: column; row-gap: 0px; flex-basis: 50%; ">
                    <text style="font-weight: bolder;">Matricula </text>
                    <text> {{ viatura.1 }} </text>
                </div>
            </div>
        </div>
    </div>
    <div style="margin: 35px 0px 0px 0px;"> <!--- outros detalhes -->
        {% load static %}
        <text style="font-weight: bolder; font-size: 20px;"> Destaques </text>
        <div style="display: flex; flex-direction: row; flex-wrap: wrap; column-gap: 2.6%; row-gap: 60px; margin-top: 25px;">
            <div style="background-color: black; height: 150px; width: 150px;">
                <div style="background-color: black; margin: 25px  auto 25px auto; width: 50px; height: 50px; "> 
                    <img src="{% static 'Img/fuel.png' %}" width="50px" alt="Fuel" style="filter: invert(1);"/>
                </div>
                <div style="color: white; text-align: center"> 
                    {{ viatura.9}} 
                </div>
            </div>
            <div style="background-color: black; height: 150px; width: 150px;">
                <div style="background-color: white; margin: 25px  auto 25px auto; width: 50px; height: 50px;"> <img src="../static/Img/fuel.png" width="50px"/>  </div>
                <div style="color: white; text-align: center;"> 
                    {{viatura.10}} 
                </div>
            </div>
            <div style="background-color: black; height: 150px; width: 150px;">
                <div style="background-color: white; margin: 25px  auto 25px auto; width: 50px; height: 50px;"> <img src="../static/Img/fuel.png" width="50px"/>  </div>
                <div style="color: white; text-align: center;"> 
                    {{viatura.11}}  
                </div>
            </div>
            <div style="background-color: black; height: 150px; width: 150px;">
                <div style="background-color: white; margin: 25px  auto 2px auto; width: 50px; height: 50px;"> </div>
                <div style="color: white; text-align: center; margin: 5px 0px 15px 0px; font-size: 14px;"> 
                    Combustivel 
                </div>
                <div style="color: white; text-align: center;"> 
                    Diesel 
                </div>
            </div>
            <div style="background-color: black; height: 150px; width: 150px;">
                <div style="background-color: white; margin: 25px  auto 2px auto; width: 50px; height: 50px;"> </div>
                <div style="color: white; text-align: center; margin: 5px 0px 15px 0px; font-size: 14px;"> 
                    Combustivel 
                </div>
                <div style="color: white; text-align: center;"> 
                    Diesel 
                </div>
            </div>
        </div>
    </div>
    <div id="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center;">
        <div style="position: relative; background-color: #fff; padding: 20px; border-radius: 8px; width: 300px;">
            <!-- Botão de fechar -->
            <button onclick="closeModal()" style="position: absolute; top: 10px; right: 10px; background: transparent; border: none; font-size: 16px; font-weight: bold; cursor: pointer;">×</button>
            
            <form method="post" action="criar_reserva" style="display: flex; flex-direction: column; gap: 10px; width: 100%; margin: 0 auto;">
                {% csrf_token %}
                <label for="data_inicio" style="font-weight: bold;">Data de Início:</label>
                <input type="date" id="data_inicio" name="data_inicio" required style="padding: 5px; font-size: 14px;">
        
                <label for="data_fim" style="font-weight: bold;">Data de Fim:</label>
                <input type="date" id="data_fim" name="data_fim" required style="padding: 5px; font-size: 14px;">
        
                <button type="submit" style="padding: 10px; font-size: 16px; background-color: #007bff; color: #fff; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px;">
                    Confirmar Reserva
                </button>
            </form>
        </div>
    </div>
    <script>
        // Função para abrir o modal
        function openModal() {
            document.getElementById('modal').style.display = 'flex';
        }

        // Função para fechar o modal
        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }
    </script>
    {% else %}
        <p>{{ error }}</p>
    {% endif %}
{% endblock %}
